# McAfee ePO 要點
###### tags: `McAfee`

#### ov1

√ MVISION ePO is a multi-tenant, globally scaled management service that runs in the cloud and
builds on the features and technology of on-premise McAfee ePO
√ The deployment workflow process manages the mutually exclusive installation of ENS or
MVISION Endpoint
√ You can migrate your systems from the on-premise ePO server to MVISION ePO using the
MVISION ePO Migration extension
√ McAfee recommends choosing a group of 10 to 25 systems as a pilot group to migrate from
the current McAfee ePO server to MVISION ePO to allow you to fix any issues that you might
come across before migrating all systems in your System Tree
√ The Protection Workspace dashboard for ENS/ATP and MVISION Endpoint is the new default
landing page for MVISION ePO

√ MVISION ePO 是一種多租戶、全球規模的管理服務，在雲中運行並基於本地 McAfee ePO 的功能和技術構建
√ 部署工作流程管理 ENS 或 MVISION Endpoint 的互斥安裝
√ 您可以使用 MVISION ePO 遷移擴展將您的系統從本地 ePO 服務器遷移到 MVISION ePO
√ McAfee 建議選擇一組 10 到 25 個系統作為試驗組，以從當前 McAfee ePO 服務器遷移到 MVISION ePO，以便您在遷移系統樹中的所有系統之前解決可能遇到的任何問題
√ ENS/ATP 和 MVISION Endpoint 的保護工作區儀表板是 MVISION ePO 的新默認登錄頁面


#### ov4

√ The Protection Workspace is where you can see all potential threats on managed devices and
respond to them
√ The Protection Workspace is divided into three categories:
• Threat Overview
• Compliance Overview
• Devices
√ Threat Overview allows you to view threat information across multiple categories
√ Compliance Overview allows you to view the status of security content and the individual
products deployed in the environment
√ Device view allows you to view your devices in three ways: tagged (default view), System Tree,
or list
√ When interacting with the Protection Workspace, start on the left side and progress to the right

√ 保護工作區是您可以查看託管設備上的所有潛在威脅並做出響應的地方
√ 保護工作區分為三類：
• 威脅概述
• 合規概覽
• 設備
√ 威脅概覽允許您跨多個類別查看威脅信息
√ 合規性概覽允許您查看安全內容的狀態和環境中部署的各個產品
√ 設備視圖允許您以三種方式查看設備：標記（默認視圖）、系統樹或列表
√ 與保護工作區交互時，從左側開始，向右進行

Audit Log(audit trail) 數據軌跡、檔案日誌、審計追蹤。

- MVISION ePO is a multi-tenant, globally scaled management service that runs in the cloud and builds on the features and technology of on-premise McAfee ePO.

MVISION ePO 是一種多租戶、全球規模的管理服務，它在雲端運行，並以本地 McAfee ePO 的功能和技術為基礎。

- MVISION ePO includes automated workflows for efficient administrative duties and streamlined incident investigation and remediation.

MVISION ePO 包括用於高效管理職責和簡化事件調查和補救的自動化工作流程。

- It scales to hundred to thousands of devices, with coverage from device to cloud.

它可以擴展到數百到數千台設備，覆蓋範圍從設備到雲。

- McAfee manages the platform infrastructure, upgrades, and maintenance.

McAfee 管理平台基礎架構、升級和維護。


MVISION ePO Key features include:
-  Quick setup
    快速設置
-  Protection Workspace
    保護工作區
-  User and role management
    用戶與角色管理
-  User session security
    用戶對話安全
-  Custom queries and reports
    自定義查詢和報告
-  MVISION client migration extension
    MVISION 客戶端遷移擴展
-  API for threat events
    威脅事件的 API
- From the Policy Catalog user interface, you can simply deploy and enforce security policies by clicking a few sequential steps.
    在策略目錄用戶介面中，可以透過點擊幾個幾個步驟來簡單地部署和實施(強制)安全策略。

#### Hi

- The deployment workflow process manages the mutually exclusive installation of products supported in MVISION ePO.
    部屬工作的流程，能夠管理 MVISION ePO 所支持的產品互斥安裝。(不會讓系統衝突)
- You can migrate your systems from the on-premise ePO server to MVISION ePO using the MVISION ePO Migration extension.
    你可以使用 MVISION ePO 遷移擴展本機地端的 ePO 服務到 MVISION ePO。
- McAfee recommends choosing a group of 10 to 25 systems as a pilot group to migrate from the current McAfee ePO server to MVISION ePO to allow you to fix any issues you might come across before migrating all systems in your System Tree.
    McAfee 建議選擇一組 10 到 25 個系統作為從當前 McAfee ePO 服務器遷移到 MVISION ePO 的試點組，以便您在遷移系統樹中的所有系統之前解決可能遇到的任何問題。
    
#### Configuration

- Administrators can invite users to create accounts, and manage and configure accounts.
    管理員可以邀請用戶創建帳號，管理與配置帳號。
- Administrators control what users see and what they can access by adding and assigning roles to users. 
    管理員通過向用戶添加和分配角色來控制用戶看到的內容以及他們可以訪問的內容。
- The System Tree contains all the systems managed by ePO.
    系統樹包含 ePO 管理的所有系統。
- You can group systems based on machine-type, geography, political boundaries, or any other logical criteria that supports your needs
    您可以根據機器類型、地理位置、政治邊界或任何其他支持您需求的邏輯標準對系統進行分組。
- Active Directory for MVISION ePO lets you synchronize you systems and organizational units from your Active Directory structure and mirror them in MVISION ePO.
    MVISION ePO 的 Active Directory 允許您從 Active Directory 結構中同步您的系統和組織單位，並將它們鏡像到 MVISION ePO 中。
- Tags can be used to identify and sort systems, simplify the creation of tasks and queries, and tailor reports to be more meaningful.
    標籤可用於識別和排序系統、簡化任務和查詢的創建以及定制報告以使其更有意義。
- Server Tasks can help you with periodic server maintenance tasks, such as maintaining System Tree synchronization, managing product licenses, purging old data, maintaining repositories, and maintaining Rogue System Sensors.
    服務器任務可以幫助您執行定期服務器維護任務，例如維護系統樹同步、管理產品許可證、清除舊數據、維護存儲庫和維護 Rogue System Sensor。
- In MVISION ePO, you can manage Client Tasks from the System Tree or from the Automation applet.
    在 MVISION ePO 中，您可以從系統樹或自動化小程序管理客戶端任務。
- MVISION ePO ships with its own querying and reporting capabilities, which are highly customizable, flexible, and easy to use.
    MVISION ePO 自帶查詢和報告功能，可高度定制、靈活且易於使用。
- The Automatic Responses feature lets you create user-configured notifications and actions, when the conditions of a rule are met.
    自動響應功能允許您在滿足規則條件時創建用戶配置的通知和操作。
- The Threat Events API provides read access to threat events available in MVISION ePO.
    威脅事件 API 提供對 MVISION ePO 中可用威脅事件的讀取訪問權限。


The Protection Workspace is where you can see all potential threats on managed devices and respond to them.


Threat Overview allows you to view threat information across multiple categories.


Compliance Overview allows you to view the status of security content and the individual products deployed in the environment.


Data Protection Overview displays the total number of Data Protection events over the selected number of days.


Device view allows you to view your devices in three ways: tagged (default view), System Tree, or list.
保護工作區是您可以查看託管設備上的所有潛在威脅並做出響應的地方。


威脅概覽允許您查看多個類別的威脅信息。


合規性概覽允許您查看安全內容的狀態以及環境中部署的各個產品。


數據保護概覽顯示選定天數內的數據保護事件總數。


設備視圖允許您以三種方式查看設備：標記（默認視圖）、系統樹或列表。


- Threats overviews

    View threat information across multiple categories. View the number of escalated devices to track devices that have encountered multiple threats and might require attention. Devices are escalated autoomatically if the number of threat events received in the last 24 hours is more than 5. Select any value to see a more detailed view of the categories.

    查看多個類別的威脅信息。 查看升級設備的數量以跟踪遇到多個威脅並可能需要注意的設備。 如果過去 24 小時內收到的威脅事件數量超過 5 個，則會自動升級設備。選擇任何值以查看更詳細的類別視圖。

    升級的設備、已解決的威脅(分為高級與基本)，高級方法解決的威脅像是Real protect, adaptive threat protect，基本方法解決像是Endpoint security。未解決的威脅、僅報告檢測、加密事件。

- Compliance Overview

    View the status of security content and the individual products deployed in the environment. Devices are color-coded to indicate the security status (health) of the device. You can easily identify the systems that are up to date, or require an update or product deployment. 

    查看環境中部署的安全內容和各個產品的狀態。 設備採用顏色編碼以指示設備的安全狀態（運行狀況）。 您可以輕鬆識別最新的系統，或者需要更新或產品部署。

    提供環境中系統是否符合其分配的安全策略可視化。
    安全內容：顯示所有已部署產品都具有合規內容的設備的每日百分比。 
    軟件狀態：顯示所有已安裝產品都具有兼容軟件版本的設備的每日百分比。 
    設備管理：顯示過去 15 天內未能報告檢測或未安裝反惡意軟件產品的設備的每日計數。 
    
- Data Protect Overview

    View, filter, and identify incidents raised in your network. The incidents are displayed based on their severity. You can click the number of incidents or on the type of incidents to see the list of incidents.

    查看、過濾和識別網絡中引發的事件。 事件根據其嚴重性顯示。 您可以單擊事件數量或事件類型以查看事件列表。

    將威脅分層級：嚴重、重大、其他事件。

### on-premises ePO product overview

- ePO provides:
    Unified management of endpoint, network, and data security
    端點、網絡、數據安全統一管理
    Web browser for configuration and management tasks
    用於配置和管理任務的 Web 瀏覽器
    Integration with McAfee and third-party solutions
    與 McAfee 和第三方解決方案集成
- McAfee Agent:
    Is a client-side component of ePO
    是客戶端的ePO組件
    Is an updater for all managed applications
    是所有託管應用程式的更新程序

- ======= Command Line ========

    透過 CMD 操作 Agent

    Use the Command Line

    When the Agent is installed, an executable (CMDAGENT.EXE) is also installed in the Agent directory ("<"Drive">":\Program Files\McAfee\Common Framework, by default). This command line utility lets you to execute Agent commands without using the McAfee Agent Status Monitor. Switches allow you to specify the action(s) the Agent undertakes and are equivalent to the options provided 
```
by the McAfee Agent Status Monitor:

    Collect and Send Properties and Events: CMDAGENT.EXE /P
    Check New Policies: CMDAGENT.EXE /C
    Enforce Policies: CMDAGENT.EXE /E
    Show Agent monitor: CMDAGENT.EXE /S
    Forward events from Windows based client systems to ePO server:
    CMDAGENT.EXE /F
    Displays the agent information: CMDAGENT.EXE /I
    Sets the logfile location: CMDAGENT.EXE /L
    Displays the help information: CMDAGENT.EXE /H
    Forward events from Unix based and Macintosh client systems to McAfee ePO server: CMDAGENT /F
```
**CMD 操作 Agent**![CMD 操作 Agent](https://i.imgur.com/qQrgnU9.png)

======= Command Line ========
    
### on-prem Installation and update

You will need to use a SQL Server as the ePO database. Launch SQL Server Configuration Manager and verify the following before installing ePO:
-  Verify that the SQL Server service is running.
-  Verify TCP/IP is enabled.
您將需要使用 SQL Server 作為 ePO 數據庫。 啟動 SQL Server 配置管理器並在安裝 ePO 之前驗證以下內容：
- 驗證 SQL Server 服務是否正在運行。
- 驗證 TCP/IP 是否已啟用。

Follow best practices for installing ePO software
遵循安裝 ePO 軟件的最佳做法

The Pre-Installation Auditor now runs automatically as part of the installation process to validate that your existing configuration is ready for the upgrade.
Pre-Installation Auditor 現在作為安裝過程的一部分自動運行，以驗證您的現有配置是否已準備好進行升級。

After the installation is complete, connect to the ePO server and verify the ePO console is accessible.
安裝完成後，連接到 ePO 服務器並驗證 ePO 控制台是否可訪問。

#### server configuration

The ePO server can be fine-tuned to the needs of an organization through entries available in the Server Settings.
通過服務器設置中的可用條目，可以根據組織的需要對 ePO 服務器進行微調。
Agent Handlers distribute network traffic via agent-to-server communication interval (ASCI).
代理處理程序通過代理到服務器的通信間隔 (ASCI) 分配網絡流量。
The System Tree contains all the systems managed by ePO.
系統樹包含 ePO 管理的所有系統。
You can group systems based on machine-type, geography, political boundaries, or any other logical criteria that supports your needs
您可以根據機器類型、地理位置、政治邊界或任何其他支持您需求的邏輯標準對系統進行分組
ePO offers two System Tree synchronization features: NT Domain Integration, and Active Directory Synchronization.
ePO 提供兩個系統樹同步功能：NT 域集成和 Active Directory 同步。
Tags can be used to identify and sort systems, simplify the creation of tasks and queries, and tailor reports to be more meaningful.
標籤可用於識別和排序系統、簡化任務和查詢的創建以及定制報告以使其更有意義。
Use the Tag Catalog page to view summary information for any tag, begin creating or editing tags, and run sorting criteria.
使用標籤目錄頁面查看任何標籤的摘要信息，開始創建或編輯標籤，並運行排序標準。
You organize tags within the Tag Group Tree in a hierarchical structure, similar to ePO System Tree structure.
您在標籤組樹中以分層結構組織標籤，類似於 ePO 系統樹結構。

#### Product Management


ePO simplifies the process of deploying products to the managed systems in your network by providing a user interface to configure and schedule deployments.


From the Software Catalog, you can download, check in, update, and remove managed product components from your server.


There are two processes you can follow to deploy products using ePO:
 product deployment projects and client tasks.


Client tasks automate system management activities, such as product deployment, upgrades, and updates.


Client tasks can be assigned at any level in the System Tree and are inherited by groups and systems lower in the tree. As with policies and policy assignments, you can break the inheritance for an assigned client task. 


You can export and import client tasks for use with other ePO servers.


The Client Task Catalog is used to add and manage client tasks.


The Client Task Comparison tool is used to compare client tasks that are similar, allowing you to determine which settings are different and which are the same.

ePO 通過提供用戶界面來配置和安排部署，從而簡化了將產品部署到網絡中的託管系統的過程。


從軟件目錄，您可以從您的服務器下載、簽入、更新和刪除被管理產品組件。


您可以遵循兩個流程來使用 ePO 部署產品：
 產品部署項目和客戶任務。


客戶端任務自動化系統管理活動，例如產品部署、升級和更新。


客戶端任務可以在系統樹中的任何級別分配，並由樹中較低的組和系統繼承。與策略和策略分配一樣，您可以中斷已分配客戶端任務的繼承。


您可以導出和導入客戶端任務以用於其他 ePO 服務器。


客戶端任務目錄用於添加和管理客戶端任務。


客戶端任務比較工具用於比較相似的客戶端任務，讓您確定哪些設置不同，哪些設置相同。


### Policy Managemet

By default, only the administrator or creator can modify a policy. Policy ownership can be changed, and a policy can have multiple owners.


bullet
McAfee Default policy is read-only. My Default policy can be edited, renamed, duplicated, deleted, exported, and shared.


bullet
Create a custom policy by duplicating an existing one. By default, custom polices have no assignments. 


bullet
A child inherits its parent’s settings unless inheritance is broken.


bullet
Policy assignment rules let you manage policies for multiple users or system based on specific criteria.


bullet
The Policy Comparison tool is used to compare policies that are similar, allowing you to determine which settings are different and which are the same.

默認情況下，只有管理員或創建者可以修改策略。 可以更改策略所有權，並且一個策略可以有多個所有者。


子彈
McAfee 默認策略是只讀的。 我的默認策略可以編輯、重命名、複製、刪除、導出和共享。


子彈
通過複製現有策略來創建自定義策略。 默認情況下，自定義策略沒有分配。


子彈
除非繼承被破壞，否則孩子會繼承其父母的設置。


子彈
策略分配規則讓您可以根據特定條件管理多個用戶或系統的策略。


子彈
策略比較工具用於比較相似的策略，允許您確定哪些設置不同，哪些設置相同。


### User Management

User accounts allow you to control how people access and use ePO.
用戶帳戶允許您控制人們訪問和使用 ePO 的方式。
While user account and permission sets are closely related, they are created and configured using separate steps.
雖然用戶帳戶和權限集密切相關，但它們是使用單獨的步驟創建和配置的。
ePO contains default permission sets to assign or use as templates.
ePO 包含要分配或用作模板的默認權限集。
For quick migration, define permission sets and then export and import them to other servers.
為了快速遷移，定義權限集，然後將它們導出和導入到其他服務器。

### Dashboard, Queries, Report

The Dashboards page displays monitors to help you manage, monitor, and act on the health of ePO-managed systems.
儀表板頁面顯示監視器以幫助您管理、監視 ePO 託管系統的運行狀況並對其採取行動。
A monitor can be anything from a chart‑based query to a small web application.
監視器可以是任何東西，從基於圖表的查詢到小型 Web 應用程序。
ePO provides default dashboards for a quick start, but also lets you create custom dashboard to meet your own needs.
ePO 提供默認儀表板以供快速入門，但也允許您創建自定義儀表板以滿足您自己的需求。
As you install additional extensions or products, additional dashboards are added to the list.
當您安裝額外的擴展或產品時，額外的儀表板會添加到列表中。
ePO ships with its own querying and reporting capabilities, which are highly customizable, flexible, and easy to use.
ePO 附帶自己的查詢和報告功能，這些功能高度可定制、靈活且易於使用。
Reports combine queries and other elements into PDF documents, enabling focused, offline analysis.
報告將查詢和其他元素組合到 PDF 文檔中，從而實現有針對性的離線分析。
Queries are essentially questions you ask ePO, and answers are returned in various forms of charts and tables.
查詢本質上是您向 ePO 提出的問題，並以各種形式的圖表和表格返回答案。
ePO provides an easy, four-step wizard, called the Query Builder, that you use to create and edit custom queries.
ePO 提供了一個簡單的四步嚮導，稱為查詢構建器，您可以使用它來創建和編輯自定義查詢。
Groups and permission sets control access to queries and reports.
組和權限集控制對查詢和報告的訪問。

### 災難復原

Plan a disaster recovery strategy.


bullet
If using a separate restore sever, its configuration should closely mirror your primary ePO server hardware.


bullet
Regularly take a Disaster Recovery Snapshot.


bullet
Regularly perform backup and copy backup file, storing them in a safe and secure location.


bullet
During an ePO software recovery installation, you must supply the Disaster Recovery Keystore encryption passphrase.


bullet
Remember, registered executable files are not backed up. You must replace those executable files when you restore the ePO server.

規劃災難恢復策略。


子彈
如果使用單獨的還原服務器，其配置應密切反映您的主 ePO 服務器硬件。


子彈
定期拍攝災難恢復快照。


子彈
定期執行備份和復製備份文件，將它們存儲在安全可靠的位置。


子彈
在 ePO 軟件恢復安裝期間，您必須提供災難恢復密鑰庫加密密碼。


子彈
請記住，註冊的可執行文件不會被備份。 還原 ePO 服務器時，您必須替換這些可執行文件。



### Trobleshooting 

Agent Log Files Overview

There are four common types of issues seen when troubleshooting various agent issues & failures:

Agent Installation
Agent-to-Server Communication
Policy Enforcement 
Policy Updating
Review the appropriate log files for the version of McAfee Agent running in the customer environment, as shown in the chart below.

### Troubleshooting

There three main logging types in ePO – Agent, Installer, Server.
ePO 中有三種主要的日誌記錄類型——代理、安裝程序、服務器。
Each of these logging types provide helpful details to assist in troubleshooting issues, such as agent connectivity, policy enforcement, installation & upgrade, Event Parser, and SQL issues.
這些日誌記錄類型中的每一種都提供有用的詳細信息來幫助解決問題，例如代理連接、策略實施、安裝和升級、事件解析器和 SQL 問題。
There are various “free” external tools that can assist in troubleshooting basic ePO issues.
有各種“免費”的外部工具可以幫助解決基本的 ePO 問題。

### Common Troubleshooting Tools Overview

The most common tools used to help troubleshoot ePO issues are:

Notepad++
Notepad++ 是一個免費的源代碼編輯器，可以在運行 Microsoft Windows 的系統上使用，以便輕鬆地將文本解析為列，並為所需的關鍵字提供語法突出顯示，以便更輕鬆地排除日誌文件的故障。其中一些功能包括選項卡式文檔界面、拖放、多個剪貼板、分屏、拼寫檢查器、查找和替換功能、數據比較和縮放。
Jconsole.bat
Jconsole.bat 是一個圖形工具，用於監控本地或遠程系統上的 Java 虛擬機 (JVM) 和 Java 應用程序。使用 Jconsole 配置 Tomcat 轉儲以進行故障排除。
WebMER
WebMER 是一種從系統收集產品數據的工具，技術支持可以更有效地分析數據以幫助解決問題。如前所述，使用 MER 分析器將結果解析為可讀格式時，最好查看來自 WebMER 的結果。
Performance Monitor (Perfmon)
性能監視器（通常稱為 Perfmon）是一個第 3 方實用程序，通常用於診斷與 ePO 相關的問題。

Perfmon 是一個 Microsoft 工具，隨許多 Microsoft 操作系統的標準安裝一起分發。就像它的名字一樣，它的目的是監控操作系統的性能。它通過監視稱為性能計數器的特定係統信息來做到這一點。這些性能計數器的範圍可以從 CPU % 到進程的處理計數。  

此工具的靈活性和可用內容量使其成為收集數據以進行故障排除時的不錯選擇。  
Process Monitor (Procmon)
Process Monitor (Procmon) 是另一個有用的第三方應用程序，用於解決可能的 ePO 問題。 

按照微軟的定義，Procmon 是：“.. 一種用於 Windows 的高級監控工具，可顯示實時文件系統、註冊表和進程/線程活動。它結合了兩個傳統 Sysinternals 實用程序 Filemon 和 Regmon 的功能，並添加了廣泛的增強功能列表，包括豐富的無損過濾、全面的事件屬性（如會話 ID 和用戶名）、可靠的進程信息、完整的線程堆棧以及對每個操作的集成符號支持，同時記錄到文件，等等。其獨特的強大功能將使 Process Monitor 成為您系統故障排除和惡意軟件搜尋工具包中的核心實用程序。” 

Procmon 可用於定位系統級信息以幫助解決各種問題。它可以幫助您確定性能和穩定性問題的過程和根本原因。這些信息是在系統級別收集的，這有助於確定問題是否真的是 McAfee 或其他第三方問題。  
查看進程監視器時，您將看到一個日誌屏幕分為 7 個專門定義的列： 

時間
進程名稱
進程識別 (PID)
手術
小路
結果
細節
SQL Server Configuration Manager
SQL Server 配置管理器是一個 Microsoft 管理控制台 (MMC) 管理單元，它：

管理與 SQL Server 關聯的服務
配置 SQL Server 使用的網絡協議
從 SQL Server 客戶端計算機管理網絡連接配置
此外，SQL Server 配置管理器允許您配置服務器和客戶端網絡協議，以及連接選項。 

啟用正確的協議後，您通常不需要更改服務器網絡連接；但是，如果需要，可以使用 SQL Server 配置管理器重新配置服務器連接，以便 SQL Server 偵聽特定的網絡協議、端口或管道。
Test.UDL
Test.UDL 是一個 Microsoft 實用程序，用於測試從系統到 SQL 的數據庫憑據連接。這通常在您處理數據庫連接問題時使用。

只需在桌面上創建一個文本文件，然後將其重命名為 Test.UDL，即可獲得 test.udl 工具。完成後，您可以打開該工具並開始測試系統與 SQL 的連接。這應該是您在解決數據庫連接問題時使用的第一個工具。

 KB70929 概述了創建 Test.UDL 文件以測試系統和數據庫連接回 SQL 的基本步驟。
Wireshark